★ 패턴）조건 존재 여부 기반 상태 판별 패턴

    존재 여부 판단
    상태 라벨링
    Boolean 형태의 판정 로직


1) case when + 조건부 집계(true false) + group by 

select car_id,
case 
    when max(case when '2022-10-16' between start_date and end_date then 1 else 0 end) = 1
    then '대여중'
    else '대여 가능'
  end as AVAILABILITY
from car_rental_company_rental_history
group by car_id
order by car_id desc
;


2) distinct + case when + subquery_exists

select distinct car_id,
case 
    when exists (
        select 1
        from car_rental_company_rental_history H1
        where h1.car_id = h2.car_id
        and '2022-10-16' between h1.start_date and h1.end_date
    )
    then '대여중'
    else '대여 가능'
  end as availability
 from car_rental_company_rental_history h2
 order by car_id desc
 ;

CTE는 WITH 절로 '가상의 결과셋'이다.
  -- with 절로 시작해서
  -- 괄호 안에 임시테이블을 만드는 select문을 작성하고
  -- 가상의 결과셋을 select 결과로 만들어서
  -- 그걸 '테이블 처럼' = '메인쿼리의 from절'처럼 쓴다.

with cte_name as (
    select a.ingredient_type, b.total_order
    from icecream_info a join first_half b on a.flavor = b.flavor
) 
select ingredient_type, sum(total_order) as total_order
from cte_name
group by ingredient_type
order by total_order asc;



-- CTE 기본 형태
  WITH cte_name AS (
    select ..
    from ..
    where ..
  )
select.................




-- CTE 여러개 사용
 WITH a AS(
    select ..
    from ..
    where ..
) ,  
b AS (
    select ..
    from ..
    where ..
)
SELECT...................

